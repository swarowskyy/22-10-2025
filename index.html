<h3>Lista de Alunos</h3>
<!--cria uma tabela-->
<table id="tabelaAlunos" border="1">
    <thead>
        <!-- linha da tebela-->
        <tr>
            <th>Nome</th>
            <th>Nascimento</th>
            <th>Telefone</th>
            <th>Endereço</th>
            <th>Excluir</th>
        </tr>
        <!--corpo da tabela-->
    </thead>
    <tbody>
        <!-- Linhas preenchidas pelo JavaScript -->
    </tbody>
</table>
<hr>
<h3>Adicionar Novo Aluno</h3>
                    Nome: 
                    <input type="text" id="nome" name="nome" value="">
                    <br>
                    Nascimento: 
                    <input type="date" id="nascimento" name="nascimento" value="">
                    <br>
                    Telefone: 
                    <input type="text" id="telefone" name="telefone" value="">
                    <br>
                    Endereço: 
                    <input type="text" id="endereco" name="endereco" value="">
                    <br>
                    <input type="hidden" name="acao" value="inserir">
                    <button onclick="cadastrar()">cadastrar</button>

<script>
    var token = "103ff56960ee454598812e4a842c9e99";
         // Exemplo de requisição GET para listar pessoas
        fetch("https://crudcrud.com/api/"+token+"/pessoas")
        .then(response => response.json())
        .then(data => botaTabela(data) )
        .catch(error => console.log(error));


        //criado função botatabela que recebem dados da api de parametro
        function botaTabela(pessoas){
           console.log(pessoas);
           //cria avariavel tabela que pega o corpo da tabela pelo id
           //pega a tag tbody dentro da tabela 
           //[0] pq gettagname retorna um array e queremos o primeiro elemento deste array
           var tabela = document.getElementById('tabelaAlunos').getElementsByTagName("tbody")[0];
           //inserir os dados na tabela apartir da avriavel do parametro pessoas
           pessoas.forEach(function(pessoas){
            var linha = tabela.insertRow();
            var celulaNome = linha.insertCell(0);
            var celulaNascimento= linha.insertCell(1);
            var celulaTelefone = linha.insertCell(2);
            var celulaEndereco = linha.insertCell(3);
            var celulaExcluir = linha.insertCell(4);

            celulaNome.innerHTML = pessoas.nome;
            celulaNascimento.innerHTML = pessoas.nascimento;
            celulaTelefone.innerHTML = pessoas.telefone;
            celulaEndereco.innerHTML = pessoas.endereco;
            celulaExcluir.innerHTML = '<button onclick="excluir(\'' + pessoas._id + '\')">Excluir</button>';
           })
        }
    
    function cadastrar() {
        var token = "103ff56960ee454598812e4a842c9e99";
          // Exemplo de requisição POST para adicionar uma nova pessoa
        fetch("https://crudcrud.com/api/"+token+"/pessoas", {
        // metodo de requisição (get, post, put, delete)
        method: "POST",
        // cabeçalho da requisição(tipo de conteudo, autorizações, etc...)
        headers: {
            "Content-Type": "application/json"
        },
        // corpo da requisição (dados que serão enviados)
        body: JSON.stringify({
            nome: document.getElementById('nome').value,
            nascimento: document.getElementById('nascimento').value,
            endereco: document.getElementById('endereco').value,
            telefone: document.getElementById('telefone').value
        })
        })
        .then(response => response.json())
        .then(data => console.log("pessoa criado:", data))
        .catch(error => console.error("Erro no POST:", error))
        .finally(() => {
            // redirecionar para a pagina inicial
            setTimeout(window.location.href = "index.html", 2000);
            
        });
    }
    function Excluir(id){
        fetch("https://crudcrud.com/api/"+token+"/pessoas", 
    }


</script>